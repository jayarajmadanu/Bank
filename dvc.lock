schema: '2.0'
stages:
  data_ingestion:
    cmd: py -m src.customerChurn.pipeline.stage_01_data_ingestion_pipeline
    deps:
    - path: src/customerChurn/components/data_ingestion.py
      hash: md5
      md5: 4e3cecd68bdbdec7ab573ab22bee91f4
      size: 963
    - path: src/customerChurn/pipeline/stage_01_data_ingestion_pipeline.py
      hash: md5
      md5: a5fc4b7c1a3fafc05c4f2cbb7f572d7d
      size: 758
    params:
      config/customerChurnConfig.yaml:
        data_ingestion:
          root_dir: artifacts/data_ingestion
          local_data_file_path: artifacts/data_ingestion/dataset.csv
          source_url: rawData/train.csv
  data_validation:
    cmd: py -m src.customerChurn.pipeline.stage_02_data_validation_pipeline
    deps:
    - path: src/customerChurn/components/data_validation.py
      hash: md5
      md5: 3a69845d328e092b7da4c95d065a4e74
      size: 1112
    - path: src/customerChurn/pipeline/stage_02_data_validation_pipeline.py
      hash: md5
      md5: 489c1fa9d95686810a9688a78a548f96
      size: 986
    params:
      config/customerChurnConfig.yaml:
        data_validation:
          root_dir: artifacts/data_validation
          dataset_file_path: artifacts/data_ingestion/dataset.csv
          validation_status_file_path: artifacts/data_validation/status.txt
      schema/customerChurnSchema.yaml:
        columns:
          id: int64
          CustomerId: int64
          Surname: object
          CreditScore: int64
          Geography: object
          Gender: object
          Age: float64
          Tenure: int64
          Balance: float64
          NumOfProducts: int64
          HasCrCard: float64
          IsActiveMember: float64
          EstimatedSalary: float64
          Exited: int64
        targer_colunm: Exited
    outs:
    - path: artifacts/data_validation/status.txt
      hash: md5
      md5: f827cf462f62848df37c5e1e94a4da74
      size: 4
  data_transformation:
    cmd: py -m src.customerChurn.pipeline.stage_03_data_transformation_pipeline
    deps:
    - path: src/customerChurn/components/data_transformation.py
      hash: md5
      md5: 5d48b32b2b364e927a2e97f7e1401d80
      size: 3502
    - path: src/customerChurn/pipeline/stage_03_data_transformation_pipeline.py
      hash: md5
      md5: 58ff6ae74a9baa2bf8267dd53500098f
      size: 883
    params:
      config/customerChurnConfig.yaml:
        data_transformation:
          root_dir: artifacts/data_transformation
          dataset_file_path: artifacts/data_ingestion/dataset.csv
          processed_dataset_file_path: artifacts/data_transformation/processed_dataset.csv
          preprocessor_obj_path: artifacts/data_transformation/preprocessor.pkl
          test_size: 0.3
          train_dataset_file_path: artifacts/data_transformation/train.csv
          test_dataset_file_path: artifacts/data_transformation/test.csv
          random_state: 57
      schema/customerChurnSchema.yaml:
        targer_colunm: Exited
    outs:
    - path: artifacts/data_transformation/preprocessor.pkl
      hash: md5
      md5: 1c2de8232d7ae94bebc5d0a5f91bd625
      size: 2776
    - path: artifacts/data_transformation/test.csv
      hash: md5
      md5: 670a8872b90ade5a56905489bcafd8a5
      size: 12948098
    - path: artifacts/data_transformation/train.csv
      hash: md5
      md5: b8de08ab2a560bd8d1f87e1c211978c2
      size: 42810623
  data_training:
    cmd: py -m src.customerChurn.pipeline.stage_04_data_training_pipeline
    deps:
    - path: src/customerChurn/components/data_trainer.py
      hash: md5
      md5: 4a53c7e3fbed5fcd77bd7ba6ec968a47
      size: 4447
    - path: src/customerChurn/pipeline/stage_04_data_training_pipeline.py
      hash: md5
      md5: 16ad10786fcf737488ac1bc90e439c01
      size: 808
    params:
      config/customerChurnConfig.yaml:
        model_trainer:
          root_dir: artifacts/model_trainer
          train_data_path: artifacts/data_transformation/train.csv
          test_data_path: artifacts/data_transformation/test.csv
          model_name: model.pkl
          best_parsms: artifacts/model_trainer/bestParams.txt
      params/customerChurnParams.yaml:
        model_trainer:
          params:
            Random Forest:
              max_features:
              - sqrt
              - log2
              n_estimators:
              - 64
              - 128
              - 256
              max_depth:
              - 3
              - 5
              - 7
              - 9
              n_jobs:
              - -1
              class_weight:
              - 0: 1
                1: 2
              - 0: 1
                1: 1
            SVR:
              kernel:
              - linear
              - poly
              - rbf
              C:
              - 1
              - 25
              - 57
              epsilon:
              - 0.1
              - 0.01
              - 0.001
            Gradient Boosting:
              learning_rate:
              - 0.1
              - 0.01
              - 0.05
              - 0.001
              subsample:
              - 0.75
              - 0.8
              - 0.85
              - 0.9
              max_features:
              - sqrt
              - log2
              n_estimators:
              - 128
              - 256
              - 512
              max_depth:
              - 3
              - 5
              - 6
            XGBClassifier:
              learning_rate:
              - 0.01
              - 0.05
              - 0.001
              n_estimators:
              - 32
              - 64
              - 128
              - 256
              max_depth:
              - 3
              - 5
              - 10
            AdaBoost Classifier:
              learning_rate:
              - 0.1
              - 0.01
              - 0.5
              - 0.001
              n_estimators:
              - 64
              - 128
              - 256
